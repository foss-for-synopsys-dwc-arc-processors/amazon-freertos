BUFFERPOOL_DIR = $(AWS_FREERTOS_ROOT)/lib/bufferpool

##
# \brief lib component related dirs
##
BUFFERPOOL_CSRCDIR = $(BUFFERPOOL_DIR)
BUFFERPOOL_ASMSRCDIR = $(BUFFERPOOL_DIR)
BUFFERPOOL_INCDIR =

# find all the source files in the target directories
BUFFERPOOL_CSRCS = $(call get_csrcs, $(BUFFERPOOL_CSRCDIR))
BUFFERPOOL_ASMSRCS = $(call get_asmsrcs, $(BUFFERPOOL_ASMSRCDIR))

# get object files
BUFFERPOOL_COBJS = $(call get_aws_relobjs, $(BUFFERPOOL_CSRCS))
BUFFERPOOL_ASMOBJS = $(call get_aws_relobjs, $(BUFFERPOOL_ASMSRCS))
BUFFERPOOL_OBJS = $(BUFFERPOOL_COBJS) $(BUFFERPOOL_ASMOBJS)

# get dependency files
BUFFERPOOL_DEPS = $(call get_deps, $(BUFFERPOOL_OBJS))

# genearte library
AWS_LIB_BUFFERPOOL = $(AWS_FREERTOS_OUT_DIR)/libbufferpool.a

# library generation rule
$(AWS_LIB_BUFFERPOOL): $(BUFFERPOOL_OBJS)
	$(TRACE_ARCHIVE)
	$(Q)$(AR) $(AR_OPT) $@ $(BUFFERPOOL_OBJS)


AWS_FREERTOS_INCDIR += $(BUFFERPOOL_INCDIR)
AWS_FREERTOS_CSRCDIR += $(BUFFERPOOL_CSRCDIR)
AWS_FREERTOS_ASMSRCDIR += $(BUFFERPOOL_ASMSRCDIR)

AWS_FREERTOS_CSRCS += $(BUFFERPOOL_CSRCS)
AWS_FREERTOS_CXXSRCS +=
AWS_FREERTOS_ASMSRCS += $(BUFFERPOOL_ASMSRCS)
AWS_FREERTOS_ALLSRCS += $(BUFFERPOOL_CSRCS) $(BUFFERPOOL_ASMSRCS)

AWS_FREERTOS_COBJS += $(BUFFERPOOL_COBJS)
AWS_FREERTOS_CXXOBJS +=
AWS_FREERTOS_ASMOBJS += $(BUFFERPOOL_ASMOBJS)
AWS_FREERTOS_ALLOBJS += $(BUFFERPOOL_OBJS)

AWS_FREERTOS_DEFINES += $(BUFFERPOOL_DEFINES)
AWS_FREERTOS_DEPS += $(BUFFERPOOL_DEPS)
AWS_FREERTOS_LIBS += $(AWS_LIB_BUFFERPOOL)
