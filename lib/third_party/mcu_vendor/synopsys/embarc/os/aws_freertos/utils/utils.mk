UTILS_DIR = $(AWS_FREERTOS_ROOT)/lib/utils

##
# \brief lib component related dirs
##
UTILS_CSRCDIR = $(UTILS_DIR)
UTILS_ASMSRCDIR = $(UTILS_DIR)
UTILS_INCDIR =

# find all the source files in the target directories
UTILS_CSRCS = $(call get_csrcs, $(UTILS_CSRCDIR))
UTILS_ASMSRCS = $(call get_asmsrcs, $(UTILS_ASMSRCDIR))

# get object files
UTILS_COBJS = $(call get_aws_relobjs, $(UTILS_CSRCS))
UTILS_ASMOBJS = $(call get_aws_relobjs, $(UTILS_ASMSRCS))
UTILS_OBJS = $(UTILS_COBJS) $(UTILS_ASMOBJS)

# get dependency files
UTILS_DEPS = $(call get_deps, $(UTILS_OBJS))

# genearte library
AWS_LIB_UTILS = $(AWS_FREERTOS_OUT_DIR)/libutils.a

# library generation rule
$(AWS_LIB_UTILS): $(UTILS_OBJS)
	$(TRACE_ARCHIVE)
	$(Q)$(AR) $(AR_OPT) $@ $(UTILS_OBJS)


AWS_FREERTOS_INCDIR += $(UTILS_INCDIR)
AWS_FREERTOS_CSRCDIR += $(UTILS_CSRCDIR)
AWS_FREERTOS_ASMSRCDIR += $(UTILS_ASMSRCDIR)

AWS_FREERTOS_CSRCS += $(UTILS_CSRCS)
AWS_FREERTOS_CXXSRCS +=
AWS_FREERTOS_ASMSRCS += $(UTILS_ASMSRCS)
AWS_FREERTOS_ALLSRCS += $(UTILS_CSRCS) $(UTILS_ASMSRCS)

AWS_FREERTOS_COBJS += $(UTILS_COBJS)
AWS_FREERTOS_CXXOBJS +=
AWS_FREERTOS_ASMOBJS += $(UTILS_ASMOBJS)
AWS_FREERTOS_ALLOBJS += $(UTILS_OBJS)

AWS_FREERTOS_DEFINES += $(UTILS_DEFINES)
AWS_FREERTOS_DEPS += $(UTILS_DEPS)
AWS_FREERTOS_LIBS += $(AWS_LIB_UTILS)
